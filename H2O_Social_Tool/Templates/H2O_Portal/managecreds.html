{% extends 'H2O_Portal/base.html' %}

{% block ManageCreds %}
  <br>
  <h2>Authentication Options</h2>
    <br>
    
    <h3>Facebook</h3>
    {% if facebook_login %}
      <p>Connected as <a href="https://facebook.com/{{ facebook_login.extra_data.id }}/" target="_blank">{{ facebook_login.extra_data.id }}</a></p>
      {% if can_disconnect %}
        <form method="post" action="{% url 'social:disconnect' 'facebook' %}">
          {% csrf_token %}
          <button type="submit">Disconnect from Facebook</button>
        </form>
      {% else %}
        <button type="button" disabled>Disconnect from Facebook</button>
        <p style="color: red">You must <a href="{% url 'password' %}">define a password</a> for your account before disconnecting from Facebook.</p>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% url 'social:begin' 'facebook' %}">Connect to Facebook</a>
      </div>
    {% endif %}

    <h3>Instagram</h3>
    {% if instagram_login %}
      <p>Connected as <a href="https://instagram.com/{{ instagram_login.extra_data.login }}/" target="_blank">{{ instagram_login.extra_data.login }}</a></p>
      {% if can_disconnect %}
        <form method="post" action="{% url 'social:disconnect' 'instagram' %}">
          {% csrf_token %}
          <button type="submit">Disconnect from Instagram</button>
        </form>
      {% else %}
        <button type="button" disabled>Disconnect from Instagram</button>
        <p style="color: red">You must <a href="{% url 'password' %}">define a password</a> for your account before disconnecting from Instagram.</p>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% url 'social:begin' 'instagram' %}">Connect to instagram</a>
      </div>
    {% endif %}

    <h3>GroupMe</h3>
    {% if groupme_login %}
      <p>Connected as <a href="https://groupme.com/{{ groupme_login.extra_data.access_token.screen_name }}/" target="_blank">@{{ groupme_login.extra_data.access_token.screen_name }}</a></p>
      {% if can_disconnect %}
        <form method="post" action="{% url 'social:disconnect' 'groupme' %}">
          {% csrf_token %}
          <button type="submit">Disconnect from GroupMe</button>
        </form>
      {% else %}
        <button type="button" disabled>Disconnect from GroupMe</button>
        <p style="color: red">You must <a href="{% url 'password' %}">define a password</a> for your account before disconnecting from GroupMe.</p>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% url 'social:begin' 'groupme' %}">Connect to GroupMe</a>
      </div>
    {% endif %}
{% endblock ManageCreds %}
