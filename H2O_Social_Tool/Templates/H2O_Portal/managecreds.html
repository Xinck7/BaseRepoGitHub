{% extends 'H2O_Portal/base.html' %}

{% block ManageCreds %} 
  <br>
  <h2>Authentication Instructions</h2>
  <br>
  <h3>For Authenticating facbook<br> 
  Sign in through the portal then have an admin link your facebook account to your profile</h3>
  <br>
  {% load socialaccount %}
  {% providers_media_js %}
    <h3>Facebook</h3>
    {% if facebook_login %}
      <p>Connected as <a href="https://facebook.com/{{ facebook_login.extra_data.id }}/" target="_blank">{{ facebook_login.extra_data.id }}</a></p>
      {% if can_disconnect %}
        <form  class="sociallogin" method="post" action="{% url 'social:disconnect' 'facebook' %}">
          {% csrf_token %}
          <button class="disconnect">Disconnect from Facebook</button>
        </form>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% provider_login_url "facebook" method="js_sdk" %}">Connect to Facebook</a>
      </div>
    {% endif %}
    <br>
    <h3>For Instagram</h3>
    
    <br>
    <h3>For GroupMe</h3>
    <form method="post" class="sociallogin" enctype="multipart/form-data" novalidate>
      {% csrf_token %}
      {% for field in form.as_p %}
          {{ field.label_tag }}
          {{field}}
      {% endfor %}
      <input type="submit" value="Store Token"></input>
    </form> 
{% endblock ManageCreds %}
{% comment %}    


    <h3>Instagram</h3>
    {% if instagram_login %}
      <p>Connected as <a href="https://instagram.com/{{ instagram_login.extra_data.login }}/" target="_blank">{{ instagram_login.extra_data.login }}</a></p>
      {% if can_disconnect %}
        <form class="sociallogin" method="post" action="{% url 'social:disconnect' 'instagram' %}">
          {% csrf_token %}
          <button class="disconnect">Disconnect from Instagram</button>
        </form>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% url 'social:begin' 'instagram' %}">Connect to Instagram</a>
      </div>
    {% endif %}
    <br>

    <h3>GroupMe</h3>
    {% if groupme_login %}
      <p>Connected as <a href="https://groupme.com/{{ groupme_login.extra_data.access_token.screen_name }}/" target="_blank">@{{ groupme_login.extra_data.access_token.screen_name }}</a></p>
      {% if can_disconnect %}
        <form class="sociallogin" method="post" action="{% url 'social:disconnect' 'groupme' %}">
          {% csrf_token %}
          <button class="disconnect">Disconnect from GroupMe</button>
        </form>
      {% endif %}
    {% else %}
      <div class="managecredslinks">
        <a href="{% url 'social:begin' 'groupme' %}">Connect to GroupMe</a>
      </div>
    {% endif %}
{% endcomment %}